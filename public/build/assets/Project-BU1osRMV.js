import{_ as V}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as N}from"./AuthenticatedLayout-iFhvIWF8.js";import{k as n,o as f,f as m,b as s,i as L,m as U,E as B,g as q,F as T,p as M,q as E,a as _,u as W,w as F,Z as J}from"./app-DMhDqf8b.js";import"./ApplicationLogo-CJ719Rdv.js";const Z={};function G(R,p){return null}const H=V(Z,[["render",G]]),K={class:"flex flex-col items-center justify-center p-4 space-y-4"},Q={class:"w-full"},X={class:"w-full"},Y={class:"w-full"},S={class:"w-full"},z={key:0,class:"mb-2"},ee=["src"],te={class:"w-full"},se={key:0,class:"mb-2"},le=["src"],ae={class:"w-full"},re=["src","alt"],oe={__name:"ProjectsUpload",setup(R){const p=n(null),d=n(null),h=n(null),y=n(null),w=n([]),x=n([]),g=n(""),v=n(0),b=n(0),j=a=>{const e=a.target.files[0];e&&e.type.startsWith("image/")?P(e,t=>{p.value=t,d.value=k(t,e.name)}):alert("Please select an image file.")},O=a=>{const e=a.target.files[0];e&&e.type.startsWith("image/")?P(e,t=>{h.value=t,y.value=k(t,e.name)},1e3):alert("Please select an image file.")},I=a=>{const e=a.target.files;for(let t=0;t<e.length;t++){const l=e[t];l.type.startsWith("image/")?P(l,o=>{w.value.push(o),x.value.push(k(o,l.name))}):alert("Please select an image file.")}},P=(a,e,t=800)=>{const l=new FileReader;l.onload=o=>{const r=new Image;r.onload=()=>{const c=document.createElement("canvas"),$=c.getContext("2d");let i=r.width,u=r.height;i>u?i>t&&(u=Math.round(u*=t/i),i=t):u>t&&(i=Math.round(i*=t/u),u=t),c.width=i,c.height=u,$.drawImage(r,0,0,i,u);const D=c.toDataURL(a.type);e(D)},r.src=o.target.result},l.readAsDataURL(a)},k=(a,e)=>{const t=a.split(","),l=t[0].match(/:(.*?);/)[1],o=atob(t[1]);let r=o.length;const c=new Uint8Array(r);for(;r--;)c[r]=o.charCodeAt(r);return new File([c],e,{type:l})},A=async()=>{if(!g.value){alert("Address Required");return}if(!v.value){alert("Units Required");return}if(!b.value){alert("Type Required");return}if(!d.value){alert("outsideTransparentFile Required");return}y.value||alert("outsideLifestyle Required");const a=[];a.push({address:g.value,units:v.value,type:b.value,outsideTransparent:await C(d.value),outsideLifestyle:await C(y.value)});const e=[];for(const t of x.value)e.push(await C(t));a.push({inside:e}),await E.post("/a/project/upload",JSON.stringify(a),{headers:{"Content-Type":"application/json"}}).then(t=>{const l=t.data.message;alert(JSON.stringify(l,null,2)),g.value="",v.value="",p.value=null,d.value=[],h.value=[],y.value=[],x.value=[],w.value=[]}).catch(t=>{console.error(t)})},C=a=>new Promise((e,t)=>{const l=new FileReader;l.readAsDataURL(a),l.onload=()=>e(l.result),l.onerror=o=>t(o)});return(a,e)=>(f(),m("div",K,[s("div",Q,[e[3]||(e[3]=s("label",{class:"block mb-2 text-gray-700"},"Project full Address:",-1)),L(s("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>g.value=t),class:"border border-gray-300 rounded p-2",required:""},null,512),[[U,g.value]])]),s("div",X,[e[4]||(e[4]=s("label",{class:"block mb-2 text-gray-700"},"Project units Amount:",-1)),L(s("input",{type:"number","onUpdate:modelValue":e[1]||(e[1]=t=>v.value=t),class:"border border-gray-300 rounded p-2",required:""},null,512),[[U,v.value]])]),s("div",Y,[e[6]||(e[6]=s("label",{class:"block mb-2 text-gray-700"},"type:",-1)),L(s("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>b.value=t),class:"border border-gray-300 rounded p-2"},e[5]||(e[5]=[s("option",{value:"com"},"Commercial",-1),s("option",{value:"res"},"Residential",-1),s("option",{value:"otr"},"Other",-1)]),512),[[B,b.value]])]),s("div",S,[e[7]||(e[7]=s("label",{class:"block mb-2 text-gray-700"},"Outside Transparent Picture:",-1)),p.value?(f(),m("div",z,[s("img",{src:p.value,alt:"Outside Transparent",class:"max-w-full h-auto rounded-lg shadow-lg"},null,8,ee)])):q("",!0),s("input",{type:"file",onChange:j,class:"border border-gray-300 rounded p-2",required:""},null,32)]),s("div",te,[e[8]||(e[8]=s("label",{class:"block mb-2 text-gray-700"},"Outside Lifestyle Picture:",-1)),h.value?(f(),m("div",se,[s("img",{src:h.value,alt:"Outside Lifestyle",class:"max-w-full h-auto rounded-lg shadow-lg"},null,8,le)])):q("",!0),s("input",{type:"file",onChange:O,class:"border border-gray-300 rounded p-2",required:""},null,32)]),s("div",ae,[e[9]||(e[9]=s("label",{class:"block mb-2 text-gray-700"},"Inside Pictures:",-1)),(f(!0),m(T,null,M(w.value,(t,l)=>(f(),m("div",{key:l,class:"mb-2"},[s("img",{src:t,alt:"Inside Picture "+(l+1),class:"max-w-full h-auto rounded-lg shadow-lg"},null,8,re)]))),128)),s("input",{type:"file",onChange:I,multiple:"",class:"border border-gray-300 rounded p-2",required:""},null,32)]),s("button",{onClick:A,class:"bg-blue-500 text-white py-2 px-4 rounded shadow-lg hover:bg-blue-700"}," Upload Images ")]))}},ne={class:"py-12"},ie={class:"mx-auto max-w-7xl sm:px-6 lg:px-8"},ue={class:"overflow-hidden bg-white shadow-sm sm:rounded-lg"},de={class:"p-6 text-gray-900"},ge={__name:"Project",setup(R){return(p,d)=>(f(),m(T,null,[_(W(J),{title:"Dashboard"}),_(N,null,{header:F(()=>d[0]||(d[0]=[s("h2",{class:"text-xl font-semibold leading-tight text-gray-800"}," Projects ",-1)])),default:F(()=>[s("div",ne,[s("div",ie,[s("div",ue,[s("div",de,[_(H),_(oe)])])])])]),_:1})],64))}};export{ge as default};
