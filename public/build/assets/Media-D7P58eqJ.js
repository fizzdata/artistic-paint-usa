import{k as r,l as T,o as i,f as u,b as s,i as k,m as D,g as $,F as I,p as R,q as C,s as P,t as M,d as j,a as _,u as A,w as L,Z as B}from"./app-Ck1xgEYH.js";import{_ as E}from"./AuthenticatedLayout-Bs5QtO1f.js";import"./ApplicationLogo-OnWjoh5A.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const J={class:"container mx-auto p-6"},O={class:"flex flex-col items-center justify-center space-y-6"},S={class:"w-full max-w-md"},W={class:"w-full max-w-md"},Y={class:"w-full max-w-md"},Z={key:0,class:"mb-2"},G=["src"],H={class:"w-full max-w-md"},K=["src","alt"],Q={__name:"MediaUpload",setup(U){const b=r([]),a=r([]),c=r(""),m=r(""),n=r(""),y=r(`https://www.youtube.com/embed/${n.value}`);T(n,l=>{y.value=`https://www.youtube.com/embed/${l}`});const g=l=>{const t=l.target.files;for(let e=0;e<t.length;e++){const o=t[e];o.type.startsWith("image/")?f(o,p=>{b.value.push(p),a.value.push(x(p,o.name))}):alert("Please select an image file.")}},f=(l,t,e=800)=>{const o=new FileReader;o.onload=p=>{const d=new Image;d.onload=()=>{const w=document.createElement("canvas"),q=w.getContext("2d");let h=d.width,v=d.height;h>v?h>e&&(v=Math.round(v*=e/h),h=e):v>e&&(h=Math.round(h*=e/v),v=e),w.width=h,w.height=v,q.drawImage(d,0,0,h,v);const N=w.toDataURL(l.type);t(N)},d.src=p.target.result},o.readAsDataURL(l)},x=(l,t)=>{const e=l.split(","),o=e[0].match(/:(.*?);/)[1],p=atob(e[1]);let d=p.length;const w=new Uint8Array(d);for(;d--;)w[d]=p.charCodeAt(d);return new File([w],t,{type:o})},F=async()=>{if(!c.value){alert("Title Required");return}if(!m.value){alert("Description Required");return}const l=[];l.push({title:c.value,description:m.value}),n&&l.push({videoSrc:y.value});const t=[];for(const e of a.value)t.push(await V(e));l.push({pictures:t}),await C.post("/a/media/upload",JSON.stringify(l),{headers:{"Content-Type":"application/json"}}).then(e=>{const o=e.data.message;alert(JSON.stringify(o,null,2)),b.value=null,a.value=null,c.value=null,m.value=null,n.value=null,y=r(`https://www.youtube.com/embed/${n.value}`)}).catch(e=>{console.error(e)})},V=l=>new Promise((t,e)=>{const o=new FileReader;o.readAsDataURL(l),o.onload=()=>t(o.result),o.onerror=p=>e(p)});return(l,t)=>(i(),u("div",J,[t[7]||(t[7]=s("h2",{class:"text-2xl font-bold text-gray-800 mb-6"},"Submit New Project Details",-1)),s("div",O,[s("div",S,[t[3]||(t[3]=s("label",{class:"block mb-2 text-gray-700"},"Title:",-1)),k(s("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>c.value=e),class:"border border-gray-300 rounded-lg p-3 w-full focus:outline-none focus:ring-2 focus:ring-blue-500",required:""},null,512),[[D,c.value]])]),s("div",W,[t[4]||(t[4]=s("label",{class:"block mb-2 text-gray-700"},"Description:",-1)),k(s("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>m.value=e),class:"border border-gray-300 rounded-lg p-3 w-full focus:outline-none focus:ring-2 focus:ring-blue-500",required:""},null,512),[[D,m.value]])]),s("div",Y,[t[5]||(t[5]=s("label",{class:"block mb-2 text-gray-700"},"YouTube Video ID:",-1)),n.value?(i(),u("div",Z,[s("iframe",{width:"250",height:"150",src:y.value,frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""},null,8,G)])):$("",!0),k(s("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=e=>n.value=e),class:"border border-gray-300 rounded-lg p-3 w-full focus:outline-none focus:ring-2 focus:ring-blue-500",required:""},null,512),[[D,n.value]])]),s("div",H,[t[6]||(t[6]=s("label",{class:"block mb-2 text-gray-700"},"Pictures:",-1)),(i(!0),u(I,null,R(b.value,(e,o)=>(i(),u("div",{key:o,class:"mb-2"},[s("img",{src:e,alt:"Inside Picture "+(o+1),class:"max-w-full h-auto rounded-lg shadow-lg"},null,8,K)]))),128)),s("input",{type:"file",onChange:g,multiple:"",class:"border border-gray-300 rounded-lg p-3 w-full focus:outline-none focus:ring-2 focus:ring-blue-500",required:""},null,32)]),s("button",{onClick:F,class:"bg-blue-500 text-white py-3 px-6 rounded-lg shadow-md hover:bg-blue-700 transition duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50"}," Submit ")])]))}},X={class:"container mx-auto p-6"},z={key:0,class:"text-center text-xl text-gray-500"},ee={key:1,class:"text-center text-xl text-red-600"},te={key:2,class:"space-y-4"},se={class:"text-lg font-semibold"},oe=["onClick"],le={__name:"MediaList",setup(U){const b=r([]),a=r(!0),c=r(!1),m=r(""),n=async()=>{try{const g=await C.get("/a/media/load");b.value=g.data.projects,a.value=!1}catch(g){c.value=!0,m.value=g.message||"Failed to load items.",a.value=!1}},y=async g=>{try{let f=Math.floor(Math.random()*2e6);await C.delete(`/a/${f}/delete/media/${g}`),n()}catch(f){console.error("Error deleting item:",f)}};return P(()=>{n()}),(g,f)=>(i(),u("div",X,[f[0]||(f[0]=s("h1",{class:"text-3xl font-bold text-center mb-6"},"Media List",-1)),a.value?(i(),u("div",z," Loading... ")):$("",!0),c.value?(i(),u("div",ee,[s("p",null,"Error: "+M(m.value),1)])):$("",!0),!a.value&&!c.value?(i(),u("ul",te,[(i(!0),u(I,null,R(b.value,x=>(i(),u("li",{key:x.id,class:"bg-gray-100 p-4 rounded-lg shadow-md hover:shadow-lg transition-shadow duration-200"},[s("p",se,[s("b",null,M(x.title),1),j(" - "+M(x.description)+" ",1),s("button",{onClick:F=>y(x.id),class:"bg-red-500 text-white px-4 py-2 rounded-md hover:bg-red-600 focus:outline-none float-right"}," Delete ",8,oe)])]))),128))])):$("",!0)]))}},ae={class:"py-12"},ne={class:"mx-auto max-w-7xl sm:px-6 lg:px-8"},re={class:"overflow-hidden bg-white shadow-sm sm:rounded-lg"},ie={class:"p-6 text-gray-900"},me={__name:"Media",setup(U){return(b,a)=>(i(),u(I,null,[_(A(B),{title:"Dashboard"}),_(E,null,{header:L(()=>a[0]||(a[0]=[s("h2",{class:"text-xl font-semibold leading-tight text-gray-800"}," Media ",-1)])),default:L(()=>[s("div",ae,[s("div",ne,[s("div",re,[s("div",ie,[_(le),_(Q)])])])])]),_:1})],64))}};export{me as default};
