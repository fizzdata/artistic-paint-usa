import{k as c,l as V,o as h,f as v,b as s,i as f,m as y,g as M,F as k,p as L,q as N,a as _,u as T,w as x,Z as A}from"./app-DMhDqf8b.js";import{_ as B}from"./AuthenticatedLayout-iFhvIWF8.js";import"./ApplicationLogo-CJ719Rdv.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const P={class:"flex flex-col items-center justify-center p-4 space-y-4"},j={class:"w-full"},E={class:"w-full"},J={class:"w-full"},O=["src"],W={class:"w-full"},Y=["src","alt"],Z={__name:"MediaUpload",setup(U){const b=c([]),p=c([]),m=c(""),g=c(""),n=c(""),w=c(`https://www.youtube.com/embed/${n.value}`);V(n,a=>{w.value=`https://www.youtube.com/embed/${a}`});const D=a=>{const t=a.target.files;for(let e=0;e<t.length;e++){const l=t[e];l.type.startsWith("image/")?$(l,r=>{b.value.push(r),p.value.push(C(r,l.name))}):alert("Please select an image file.")}},$=(a,t,e=800)=>{const l=new FileReader;l.onload=r=>{const o=new Image;o.onload=()=>{const u=document.createElement("canvas"),F=u.getContext("2d");let i=o.width,d=o.height;i>d?i>e&&(d=Math.round(d*=e/i),i=e):d>e&&(i=Math.round(i*=e/d),d=e),u.width=i,u.height=d,F.drawImage(o,0,0,i,d);const I=u.toDataURL(a.type);t(I)},o.src=r.target.result},l.readAsDataURL(a)},C=(a,t)=>{const e=a.split(","),l=e[0].match(/:(.*?);/)[1],r=atob(e[1]);let o=r.length;const u=new Uint8Array(o);for(;o--;)u[o]=r.charCodeAt(o);return new File([u],t,{type:l})},R=async()=>{if(!m.value){alert("Title Required");return}if(!g.value){alert("Description Required");return}const a=[];a.push({title:m.value,description:g.value}),n&&a.push({videoSrc:w.value});const t=[];for(const e of p.value)t.push(await q(e));a.push({pictures:t}),await N.post("/a/media/upload",JSON.stringify(a),{headers:{"Content-Type":"application/json"}}).then(e=>{const l=e.data.message;alert(JSON.stringify(l,null,2)),b.value=null,p.value=null,m.value=null,g.value=null,n.value=null,w=c(`https://www.youtube.com/embed/${n.value}`)}).catch(e=>{console.error(e)})},q=a=>new Promise((t,e)=>{const l=new FileReader;l.readAsDataURL(a),l.onload=()=>t(l.result),l.onerror=r=>e(r)});return(a,t)=>(h(),v("div",P,[s("div",j,[t[3]||(t[3]=s("label",{class:"block mb-2 text-gray-700"},"Title:",-1)),f(s("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>m.value=e),class:"border border-gray-300 rounded p-2",required:""},null,512),[[y,m.value]])]),s("div",E,[t[4]||(t[4]=s("label",{class:"block mb-2 text-gray-700"},"Description",-1)),f(s("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>g.value=e),class:"border border-gray-300 rounded p-2",required:""},null,512),[[y,g.value]])]),s("div",J,[t[5]||(t[5]=s("label",{class:"block mb-2 text-gray-700"},"YouTobe Video id:",-1)),n.value?(h(),v("iframe",{key:0,width:"250",eight:"150",src:w.value,frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""},null,8,O)):M("",!0),f(s("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=e=>n.value=e),class:"border border-gray-300 rounded p-2",required:""},null,512),[[y,n.value]])]),s("div",W,[t[6]||(t[6]=s("label",{class:"block mb-2 text-gray-700"},"Pictures:",-1)),(h(!0),v(k,null,L(b.value,(e,l)=>(h(),v("div",{key:l,class:"mb-2"},[s("img",{src:e,alt:"Inside Picture "+(l+1),class:"max-w-full h-auto rounded-lg shadow-lg"},null,8,Y)]))),128)),s("input",{type:"file",onChange:D,multiple:"",class:"border border-gray-300 rounded p-2",required:""},null,32)]),s("button",{onClick:R,class:"bg-blue-500 text-white py-2 px-4 rounded shadow-lg hover:bg-blue-700"}," Submit ")]))}},G={class:"py-12"},H={class:"mx-auto max-w-7xl sm:px-6 lg:px-8"},K={class:"overflow-hidden bg-white shadow-sm sm:rounded-lg"},Q={class:"p-6 text-gray-900"},te={__name:"Media",setup(U){return(b,p)=>(h(),v(k,null,[_(T(A),{title:"Dashboard"}),_(B,null,{header:x(()=>p[0]||(p[0]=[s("h2",{class:"text-xl font-semibold leading-tight text-gray-800"}," Media ",-1)])),default:x(()=>[s("div",G,[s("div",H,[s("div",K,[s("div",Q,[_(Z)])])])])]),_:1})],64))}};export{te as default};
